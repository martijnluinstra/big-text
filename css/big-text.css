@import url('https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap');

:root {
    --ON: initial;
    --OFF: ;

    --radius: 4px;
    --gap-small: .5rem;
    --gap: 1rem;
    --gap-large: 1.5rem;
    --local-gap-small: .5em;
    --local-gap: 1em;
    --local-gap-large: 1.5em;

    --white: #ffffff;
    --light-grey: #eeeeee;
    --light-grey-focus: #dddddd;
    --grey: #999999;

    --primary: #8080ff;
    --primary-hsl-val: 240deg 100% 75%;
    --primary-hsl: hsl(var(--primary-hsl-val));
    --primary-invert: var(--white);
    --success: #00c19d;
    --success-invert: var(--white);

    --link-color: #4C56CE;

    --shadow-small-color: hsl(0deg 0% 0% / 0.333);
    --shadow-small: 0.5px 1px 1px  var(--shadow-small-color),
                    1px 2px 2px var(--shadow-small-color);

    --shadow-small-filter: drop-shadow(0.5px 1px 1px  var(--shadow-small-color))
                           drop-shadow(1px 2px 2px var(--shadow-small-color));
    --shadow-inset: inset 0.5px 1px 1px  var(--shadow-small-color),
                    inset 1px 2px 2px var(--shadow-small-color);

    --shadow-medium-color: hsl(0deg 0% 0% / 0.2);
    --shadow-medium: 1px 2px 2px var(--shadow-medium-color),
                     2px 4px 4px var(--shadow-medium-color),
                     3px 6px 6px var(--shadow-medium-color);

    --shadow-large-color:  hsl(0deg 0% 0% / 0.1);
    --shadow-large: 1px 2px 2px var(--shadow-large-color),
                    2px 4px 4px var(--shadow-large-color),
                    4px 8px 8px var(--shadow-large-color),
                    8px 16px 16px var(--shadow-large-color),
                    16px 32px 32px var(--shadow-large-color);

    --outline: 3px solid hsl(var(--primary-hsl-val) / .75);

    --font-serif: serif;
    --font-sans-serif: sans-serif;
    --font-cursive: cursive;
    --font-monospace: monospace;
    --font-fira-sans: 'Fira Sans', sans-serif;
    --font-impact: 'Impact', 'Charcoal', sans-serif;
    --font-arial-black: 'Arial Black', 'Gadget', sans-serif;
    --font-verdana: 'Verdana', 'Geneva', sans-serif;

    --controls-width: 45ch;
    --header-height: 2.5rem;

    --layout-picker-icon-size: 3.5em;
}

/*******************************************************************************
 * Josh's Custom CSS Reset
 * https://www.joshwcomeau.com/css/custom-css-reset/
 ******************************************************************************/
*, *::before, *::after {
    box-sizing: border-box;
}
* {
    margin: 0;
}
html, body {
    height: 100%;
}
body {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
}
img, picture, video, canvas, svg {
    display: block;
    max-width: 100%;
}
input, button, textarea, select {
    font: inherit;
}
p, h1, h2, h3, h4, h5, h6 {
  overflow-wrap: break-word;
}

/*******************************************************************************
 * General styling
 ******************************************************************************/

body {
    font-family: sans-serif;
}

[hidden] {
    display: none !important;
}

[disabled] {
    cursor: not-allowed;
}

a,
a:visited {
    color: var(--link-color);
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

h1, h2, h3, h4, h5, h6 {
    /* On this page, different h#'s are only used for accessibility, but
     * there'll never be a need to differentiate visually. */
    font-size: 1.2rem;
} 

:is(p, h1, h2, h3, h4, h5, h6):not(:last-child) {
    margin-bottom: var(--gap);
}

noscript {
    border-radius: var(--radius);
    border: none;
    box-shadow: var(--shadow-large);
    margin: auto;
    max-width: var(--controls-width);
    padding: var(--gap);
}

svg.icon {
    display: inline-block;
    width: 1.25em;
    height: 1.25em;
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    fill: none;
    max-width: unset;
}

[contenteditable]:focus {
    outline: var(--outline);   
    border-radius: var(--radius);
}

hr {
    border: 1px solid var(--light-grey-focus);
    margin: var(--gap-large) 0;
}


/*******************************************************************************
 * Components
 ******************************************************************************/


/*******************************************************************************
 * Buttons (and button-like components)
 ******************************************************************************/

button,
.button,
.toggle-button input ~ label,
.select {
    font-size: inherit;
    line-height: inherit;
    background: var(--light-grey);
    cursor: pointer;
    display: inline-block;
    /*border: 1px solid var(--grey);*/
    border: none;
    border-radius: var(--radius);
    padding: .25em .75em;
    user-select: none;
    box-shadow: var(--shadow-small);
    transition-duration: 75ms;
    transition-property: transform, background-color, box-shadow;
    font-weight: normal;
}

button:not(:last-child),
.button:not(:last-child),
.dropdown:not(:last-child),
.toggle-button:not(:last-child),
.select {
    margin-right: var(--local-gap-small);
    margin-bottom: 0;
}

button:hover,
.button:hover,
.dropdown .button:hover,
.toggle-button:hover input ~ label,
.select:hover,
.select:focus-within {
    background: var(--light-grey);
    box-shadow: var(--shadow-medium);
    transform: scale(1.05);
    position: relative; /* Pull focussed element to front, so outline won't be interrupted */
    z-index: 11;
}

button:focus,
.button:focus,
.toggle-button:focus-within label,
.select:focus-within {
    outline: var(--outline);
    position: relative; /* Pull focussed element to front, so outline won't be interrupted */
    z-index: 10;
}

button:active,
.button:active,
.toggle-button input:active ~ label,
.select:active {
    background: var(--light-grey-focus);
}

button svg.icon,
.button svg.icon,
.toggle-button label svg.icon {
    position: relative;
    top: -.075em; /* Magic number to make it look centeredâ€¦ */
    vertical-align: middle;
}


button svg.icon:only-child,
.button svg.icon:only-child,
.toggle-button label svg.icon:only-child {
    margin-left: -.375em;
    margin-right: -.375em;
}

button.is-expanded,
.button.is-expanded,
.toggle-button.is-expanded input ~ label,
.select.is-expanded {
    display: block;
    width: 100%;
}

button.is-primary,
.button.is-primary,
.toggle-button.is-primary input ~ label,
.select.is-primary {
    background: var(--primary);
    color: var(--primary-invert);
    font-size: 1.2em;
}

button.is-success,
.button.is-success,
.toggle-button.is-success input ~ label,
.select.is-success {
    background: var(--success);
    color: var(--success-invert);
    font-size: 1.2em;
}

button.is-success:focus,
.button.is-success:focus,
.toggle-button.is-success:focus-within label,
.select.is-success:focus-within {
    outline: none;
}

button:not(.is-success) .success-message,
.button:not(.is-success) .success-message {
    display: none;
}

button.is-success .success-message,
.button.is-success .success-message {
    display: inline;
}

button.is-success .cta,
.button.is-success .cta {
    display: none;
}


button[disabled]:hover,
.button[disabled]:hover,
.dropdown .button[disabled]:hover,
.toggle-button:hover input[disabled] ~ label{
    box-shadow: var(--shadow-small);
    transform: none;
}

/*******************************************************************************
 * Basic form elements
 ******************************************************************************/

.field:not(:last-child) {
    margin-bottom: var(--gap);
}

.field .help {
    display: block;
    font-size: 80%;
}

.field > :not(:last-child) {
    margin-bottom: var(--gap-small);
}

.field > :is(button, .button, .button-group)  {
    margin-bottom: 0;
}


label,
.label {
    font-weight: bold;
    display: block;
    width: 100%;
}

input {
    width: 100%;
}

slider-input::part(number),
input:not([type=color]):not([type=checkbox]):not([type=radio]):not([type=range]) {
    font-size: inherit;
    line-height: inherit;
    box-sizing: border-box;
    border: 1px solid var(--grey);
    border-radius: var(--radius);
    padding: .25em .75em;
    display: inline-block;
}

slider-input::part(number),
input[type=number] {
    padding-right: .5em;
}

slider-input::part(number):focus,
input:not([type=color]):not([type=checkbox]):not([type=radio]):not([type=range]):focus {
    outline: var(--outline);
}

input:invalid,
select:invalid {
    border: 1px solid red;
    outline: none;
}

.select {
    padding: 0;
    position: relative;
    width: 100%;
}

.select select {
    appearance: none;
    border: none;
    padding: .25em .75em;
    background: none;
    width: 100%;
    cursor: inherit;
}

.select select:focus {
    outline: none;
}

.select select,
.dropdown .button {
    position: relative;
    padding-right: calc(1.125em + .75em);
    text-align: left;
}

.select::after,
.dropdown .button::after {
    border: 2px solid transparent;
    border-radius: 2px;
    border-right: 0;
    border-top: 0;
    content: " ";
    display: block;
    height: .625em;
    margin-top: -.4375em;
    pointer-events: none;
    position: absolute;
    top: 50%;
    transform: rotate(-45deg);
    transform-origin: center;
    width: .625em;
    
    border-color: currentColor;
    right: .75em;
    z-index: 1;
}

fieldset {
    border: none;
}

fieldset.field {
    padding: 0 var(--gap);
    margin: 0 calc(var(--gap) * -1);
}

fieldset:not(.field):not(.dropdown):not(.button-group) {
    padding: var(--gap);
    box-shadow: var(--shadow-medium);
    border-radius: var(--radius);
    margin-bottom: var(--gap);
}

fieldset legend {
    font-weight: bold;
    padding: 0;
    float: left;
    width: 100%;
    margin-bottom: var(--gap-small);
    font-size: 1.2em;
}

/*******************************************************************************
 * Button groups
 ******************************************************************************/

.button-group {
    display: inline-flex;
    justify-content: flex-start;
    flex-flow: row wrap;
    padding: 0;
    border-radius: var(--radius);
    box-shadow: var(--shadow-small);
}

.button-group:not(:last-child) {
    margin-right: var(--local-gap-small);
}

.button-group > button:not(:last-child),
.button-group > .button:not(:last-child),
.button-group > .dropdown:not(:last-child),
.button-group > .toggle-button:not(:last-child) {
    margin-right: 0;
}

.button-group > button,
.button-group > .button,
.button-group > .dropdown .button,
.button-group > .toggle-button label {
    box-shadow: none;
}

.button-group > button:hover,
.button-group > .button:hover,
.button-group > .dropdown .button:hover,
.button-group > .toggle-button:hover label {
    box-shadow: var(--shadow-medium);
    border-radius: var(--radius) !important;
}

.button-group > button:focus,
.button-group > .button:focus,
.button-group > .dropdown .button:focus,
.button-group > .toggle-button:focus label,
.button-group > .toggle-button:focus-within label {
    border-radius: var(--radius) !important;
}

.button-group > button:not(:first-child),
.button-group > .button:not(:first-child),
.button-group > .dropdown:not(:first-child) .button,
.button-group > .toggle-button:not(:first-child) label {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

.button-group > button:not(:last-child),
.button-group > .button:not(:last-child),
.button-group > .dropdown:not(:last-child) .button,
.button-group > .toggle-button:not(:last-child) label {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
}

/*******************************************************************************
 * Toggle button
 ******************************************************************************/

.toggle-button {
    display: inline-block;
}

.toggle-button input {
    outline: 0;
    user-select: none;
    display: inline-block;
    position: absolute;
    opacity: 0;
    height: 0;
    width: 0;
}

.toggle-button input:checked ~ label {
    background: var(--light-grey-focus);
}


/*******************************************************************************
 * Dropdown
 ******************************************************************************/

.dropdown,
.dropdown:not(:last-child) {
    padding: 0;
    border: none;
    margin-bottom: 0;
    position: relative;
}

.dropdown .button {
    margin-right: 0;
}

.dropdown .button > * {
    vertical-align: top;
}

.dropdown .options {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    flex-direction: column;
    background: white;
    box-shadow: var(--shadow-medium);
    border-radius: var(--radius);
    overflow: hidden;
    z-index: 20;
    min-width: 100%;
    list-style: none;
    margin-left: 0;
    padding-left: 0;
}

.dropdown .options input {
    outline: 0;
    user-select: none;
    display: inline-block;
    position: absolute;
    opacity: 0;
    height: 0;
    width: 0;
}

.dropdown .options label {
    display: block;
    padding: .25em .75em;
    white-space: nowrap;
    position: relative;
    font-weight: normal;
}

.dropdown .options label:hover {
    background: var(--light-grey);
}

.dropdown .options :checked + label {
    background: var(--light-grey);
}

.dropdown .options :checked + label:hover,
.dropdown .options :checked:focus + label {
    background: var(--light-grey-focus);
}

.dropdown.active {
    box-shadow: var(--shadow-medium);
}

.dropdown.active .options {
    display: flex;
}

.dropdown.active .button {
    position: relative;
    /*background: white;*/
}


/*******************************************************************************
 * Switch
 * 
 * Based on Cover Style System's implementation of bulma-switch.
 * See https://github.com/Wikiki/bulma-switch
 ******************************************************************************/

.switch {
    --switch-size: 1em;
    --switch-height: calc(var(--switch-size) * 1.5);
    --switch-width: calc(var(--switch-height) * 2);
    --switch-paddle-offset: .15em;
    --switch-paddle-height: calc(var(--switch-height) - var(--switch-paddle-offset) * 2);
    --switch-paddle-width: calc(var(--switch-height) - var(--switch-paddle-offset) * 2);
    --switch-paddle-active-offset: calc(var(--switch-width) - var(--switch-paddle-width) - var(--switch-paddle-offset));


    --switch-checked-color: var(--primary);
    --switch-unchecked-color: var(--light-grey-focus);
    --switch-base-color: #ffffff;
}

.switch.is-small { --switch-size: .75em; }
.switch.is-medium { --switch-size: 1.25em; }
.switch.is-large { --switch-size: 1.5em; }

.switch label {
    position: relative;
    display: inline-block;
    font-size: var(--switch-size);
    line-height: initial;
    padding-left: calc(var(--switch-width) * 1.2); /* TODO: + spacing */
    padding-top: 0.2em;
    margin-bottom: 0;
    cursor: pointer;
    min-width: var(--switch-width);
    min-height: var(--switch-height);
    vertical-align: middle;
}

.switch input {
    outline: 0;
    user-select: none;
    display: inline-block;
    position: absolute;
    opacity: 0;
    height: 0;
    width: 0;
}

.switch input:focus ~ label::before {
    outline: var(--outline);
}

.switch input ~ label::before {
    position: absolute;
    display: block;
    top: calc(50% - var(--switch-height) * .5);
    left: 0;
    width: var(--switch-width);
    height: var(--switch-height);
    /*border: 0.1rem solid transparent;*/
    border-radius: calc(var(--switch-height) / 2);
    background: var(--switch-unchecked-color);
    content: '';


    transition-duration: 75ms;
    transition-property: background;
    box-shadow: var(--shadow-inset);
}

.switch input ~ label::after {
    display: block;
    position: absolute;
    top: calc(50% - var(--switch-paddle-height) * .5);
    left: var(--switch-paddle-offset);
    width: var(--switch-paddle-width);
    height: var(--switch-paddle-height);
    transform: translate3d(0, 0, 0);
    border-radius: 50%;
    background: var(--switch-base-color);
    transition: all 0.25s ease-out;
    content: '';

    transition-duration: 75ms;
    transition-property: transform, box-shadow, left, right;
    box-shadow: var(--shadow-small);
}

.switch:hover input ~ label::after {
    box-shadow: var(--shadow-medium);
    transform: scale(1.05);
}

.switch input:checked ~ label::before {
    background: var(--switch-checked-color);
}

.switch input:checked ~ label::after {
    left: var(--switch-paddle-active-offset);
    background-image: linear-gradient(to bottom, var(--switch-base-color) 20%, transparent 20%, transparent 80%, var(--switch-base-color) 80%),
                      linear-gradient(to right, transparent 43.75%, var(--switch-checked-color) 43.75%, var(--switch-checked-color) 56.25%, transparent 56.25%);
}

.switch.is-right label {
    padding-left: 0;
    padding-right: calc(var(--switch-width) * 1.2); /* TODO: + spacing */
}

.switch.is-right input ~ label::before {
    left: auto;
    right: 0;
}

.switch.is-right input ~ label::after {
    left: auto;
    right: var(--switch-paddle-active-offset); /* for right-aligned, active/inactive states are swapped */
}

.switch.is-right input:checked ~ label::after {
    left: auto;
    right: var(--switch-paddle-offset);
}


/*******************************************************************************
 * Dialog
 ******************************************************************************/

@keyframes animateZoom {
    0% {
        opacity: 0;
        transform: scale(0.8);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

dialog {
    border-radius: var(--radius);
    border: none;
    box-shadow: var(--shadow-large);
    margin: auto;
    max-width: var(--controls-width);
    padding: var(--gap);
}

dialog[open] {
    animation: animateZoom 75ms linear forwards;
}

dialog form {
    text-align: right;
}

/*******************************************************************************
 * Specific components
 ******************************************************************************/


/*******************************************************************************
 * Font picker
 ******************************************************************************/

.font-picker .button {
    width: 15ex;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
}

.font-picker .options label {
    padding: .25rem .75rem;
}

.font-picker [value=serif] + label,
.font-picker [data-toggle$=serif] { font-family: var(--font-serif); }
.font-picker [value=sans-serif] + label,
.font-picker [data-toggle$=sans-serif] { font-family: var(--font-sans-serif); }
.font-picker [value=cursive] + label,
.font-picker [data-toggle$=cursive] { font-family: var(--font-cursive); }
.font-picker [value=monospace] + label,
.font-picker [data-toggle$=monospace] { font-family: var(--font-monospace); }
.font-picker [value=fira-sans] + label,
.font-picker [data-toggle$=fira-sans] { font-family: var(--font-fira-sans);}
.font-picker [value=impact] + label,
.font-picker [data-toggle$=impact] { font-family: var(--font-impact); }
.font-picker [value=arial-black] + label,
.font-picker [data-toggle$=arial-black] { font-family: var(--font-arial-black); }
.font-picker [value=verdana] + label,
.font-picker [data-toggle$=verdana] { font-family: var(--font-verdana); }



/*******************************************************************************
 * Layout picker
 ******************************************************************************/

.layout-picker {
    overflow-x: auto;
    overflow-y: visible;
    margin-top: calc(var(--gap-small) * -1);
    margin-right: calc(var(--gap) * -1);
    margin-bottom: 0;
    margin-left: calc(var(--gap) * -1);
}

.layout-picker .button-group {
    flex-wrap: nowrap;
    margin: var(--gap-small) var(--gap);
}

.layout-picker .dropdown {
    position: static;
}

.layout-picker .dropdown .button {
    padding: var(--gap-small);
}

.layout-picker .dropdown .button[data-checked] {
    background: var(--light-grey-focus);
}

.layout-picker .dropdown .button::after {
    display: none;
}

.layout-picker .dropdown .options {
    --grid-size: calc(var(--layout-picker-icon-size) + 2 * var(--gap-small));
    top: auto;
    right: auto;
    left: var(--gap);
    min-width: unset;
    max-width: calc(100% - 2 * var(--gap));
    width: 100%;
    grid-auto-columns: var(--grid-size);
    grid-template-rows: var(--grid-size) var(--grid-size);
    grid-auto-flow: column;
    justify-content: center;
}

.layout-picker .dropdown:is(.l0, .l1) .options {
    grid-template-rows: 4.5em;
    width: auto;
}

.dropdown.active .options {
    display: grid;
}

.layout-picker .dropdown .options label {
    padding: var(--gap-small);
    border-radius: var(--radius);
}

.layout-picker .icon {
    display: grid;
    height: var(--layout-picker-icon-size);
    width: var(--layout-picker-icon-size);
    border-radius: var(--radius);
    overflow: hidden;
    outline: 2px solid currentColor;
    outline-offset: -1px;
}

.layout-picker .icon:empty::after,
.layout-picker .icon:empty::before {
    display: block;
    content: '';
}

.layout-picker .icon:empty::before { grid-area: a; }
.layout-picker .icon :nth-child(1) { grid-area: a; }
.layout-picker .icon:empty::after  { grid-area: b; }
.layout-picker .icon :nth-child(2) { grid-area: b; }
.layout-picker .icon :nth-child(3) { grid-area: c; }

.layout-picker .icon:empty::after,
.layout-picker .icon:empty::before,
.layout-picker .icon * {
    border: 2px solid currentColor;
    font-size: 80%;
    line-height: 1em;
    margin: -1px;
}

.layout-picker .icon * {
    display: flex;
    justify-content: center;
    align-items: center;
}

.layout-picker .l0 .icon {
    grid-template-columns: auto;
    grid-template-rows: 50% 50%;
    grid-template-areas: "a" "b";
}

.layout-picker .l1 .icon {
    grid-template-columns: 50% 50%;
    grid-template-rows: auto;
    grid-template-areas: "a b";
}

.layout-picker .l2 .icon {
    grid-template-columns: auto;
    grid-template-rows: 33.333% 33.333% 33.333%;
    grid-template-areas: "a" "b" "c";
}

.layout-picker .l3 .icon {
    grid-template-columns: 33.333% 33.333% 33.333%;
    grid-template-rows: auto;
    grid-template-areas: "a b c";
}

.layout-picker :is(.l4, .l5, .l6, .l7) .icon {
    grid-template-columns: 50% 50%;
    grid-template-rows: 50% 50%;
}

.layout-picker .l4 .icon { grid-template-areas: "a a" "b c"; }
.layout-picker .l5 .icon { grid-template-areas: "a b" "a c"; }
.layout-picker .l6 .icon { grid-template-areas: "a b" "c c"; }
.layout-picker .l7 .icon { grid-template-areas: "a c" "b c"; }


/*******************************************************************************
 * Layout
 ******************************************************************************/

main {
    height: 100%;
    width: 100%;
    display: flex;
    flex-direction: row;
}

.controls-trigger,
.controls-trigger:hover,
.controls-trigger:focus {
    position: fixed;
    top: .4em;
    left: .4em;
    z-index: 1;
    box-shadow: none;
    background: none;
    font-size: 1.2em;
    padding: 0 .5em;
}

.controls-trigger:hover,
.controls-trigger:focus {
    transform: scale(1.2);
    background: var(--light-grey);
    box-shadow: var(--shadow-medium);
}

.controls {
    flex: 0 0 0%;
    overflow: hidden;
    transition: flex-basis 250ms ease-out, box-shadow 0ms 250ms;
    position: relative;
    z-index: 1;
}

.controls.is-active {
    flex-basis: var(--controls-width);
    box-shadow: var(--shadow-large);
    transition: flex-basis 250ms ease-out, box-shadow 0ms;
}

.controls form {
    width: var(--controls-width);
    max-width: var(--controls-width);
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    z-index: 10;
    background: var(--white);
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--gap);
}

.controls form.modal {
    right: 100%;
    transition: right 250ms ease-out, box-shadow 0ms 250ms;
}


.controls form.modal.is-active {
    right: 0%;
    box-shadow: var(--shadow-large);
    transition: right 250ms ease-out, box-shadow 0ms;
}

.controls form header {
    display: flex;
    gap: var(--gap-small);
    background: var(--light-grey);
    box-shadow: var(--shadow-small);
    padding: 0;
    margin-top: calc(var(--gap) * -1);
    margin-right: calc(var(--gap) * -1);
    margin-bottom: var(--gap);
    margin-left: calc(var(--gap) * -1);
    width: auto;
    max-width: unset;
    height: var(--header-height);
    line-height: var(--header-height);
}

.controls form header button {
    background: none;
    box-shadow: none;
    border-radius: 0;
    margin-right: 0;
    padding-left: calc(.75em + var(--gap-small));
}

.controls form header button:last-child {

    padding-right: calc(.75em + var(--gap-small));
    padding-left: 0;
}

.controls form header button:hover {
    transform: scale(1.2); /* exaggerated effect, as it's the only hover effect on this button */
}

.controls form header button:focus {
    outline: none;
}

.controls form header button:focus .icon{
    outline: var(--outline);
    outline-offset: 1px;
    border-radius: var(--radius);
}

.controls form header button .icon {
    top: 0;
    vertical-align: baseline;
}

.controls form header :is(h1, h2, h3, h4, h5, h6) {
    flex-grow: 1;
}

/*******************************************************************************
 * Big Text
 ******************************************************************************/

.big-text {
    flex: 1 1 100%;
}

.big-text {
    --padding-narrow: 3.75vmin 5vmin;
    --padding-regular: 7.5vmin 10vmin;
    --padding-wide: 11.5vmin 15vmin;
    --padding-ultrawide: 15vmin 20vmin;
    /*--padding-narrow: .375em .5em;
    --padding-regular: .75em 1em;
    --padding-wide: 1.15em 1.5em;
    --padding-ultrawide: 1.5em 2.0em;*/

    /*--padding-narrow: min(.375em, 3.75vmin) min(.5em, 5vmin);
    --padding-regular: min(.75em, 7.5vmin) min(1em, 10vmin);
    --padding-wide: min(1.15em, 11.5vmin) min(1.5em, 15vmin);
    --padding-ultrawide: min(1.5em, 15vmin) min(2.0em, 20vmin);*/

    --placement-start: -999;
    --placement-end: 999;

    --has-image: var(--OFF);
    --_image-size: var(--has-image, var(--image-size, 50%));

    position: relative;
    /*display: flex;*/
    /*flex-direction: var(--layout, column);*/
    /*align-items: stretch;*/
    /*justify-content: var(--has-image, var(--justify, center));*/
    overflow: hidden;

    height: 100%;
    width: 100%;
}

.big-text:not(.has-image):not(.has-background-image) .image-wrapper {
    display: none;
}

.big-text .image-wrapper {
    flex-grow: 0;
    flex-shrink: 0;
    flex-basis: var(--_image-size);
    position: relative;
    order: var(--image-placement, var(--placement-start));
}

.big-text .image-wrapper figure {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -1;
}

.big-text .image-wrapper figure img {
    display: block;
    height: 100%;
    width: 100%;
    object-fit: cover;
}

.big-text:not(.has-countdown) .countdown-wrapper {
    display: none;
}

.big-text .countdown-wrapper,
.big-text .text-wrapper {
    --_background-color: var(--background-color, #fff9);
    --_background-gradient-color: var(--background-gradient-color, #ccc9);
    --background-gradient-linear: linear-gradient(var(--background-gradient-direction, 0deg), var(--_background-color) 0%, var(--_background-gradient-color) 100%);
    --background-gradient-radial: radial-gradient(circle, var(--_background-gradient-color) 0%, var(--_background-color) 100%);
    --background-gradient: var(--background-gradient-linear);
    --background: var(--_background-color);
    --background: var(--background-gradient);

    --shadow-regular: var(--shadow-x, 0) var(--shadow-y, 0) var(--shadow-blur, 0) var(--shadow-color, currentColor);
    --shadow-ugly: calc(var(--shadow-x, 0) * .333) calc(var(--shadow-y, 0) * .333) calc(var(--shadow-blur, 0) * .333) #ffffff,
                   calc(var(--shadow-x, 0) * .666) calc(var(--shadow-y, 0) * .666) calc(var(--shadow-blur, 0) * .666) #000000,
                   var(--shadow-x, 0) var(--shadow-y, 0) var(--shadow-blur, 0) var(--shadow-color, red);
    --shadow-fire: 0 -.01em .04em #ffffff,
                   0 -.02em .1em #ffff00,
                   0 -.1em .2em #ff8000,
                   0 -.18em .4em #ff0000;
    --shadow-glow: 0 0 calc(var(--shadow-blur, 0) * .07) #ffffff,
                   0 0 calc(var(--shadow-blur, 0) * .13) #ffffff,
                   0 0 calc(var(--shadow-blur, 0) * .2) #ffffff,
                   0 0 calc(var(--shadow-blur, 0) * .27) var(--shadow-color, lime),
                   0 0 calc(var(--shadow-blur, 0) * .4) var(--shadow-color, lime),
                   0 0 calc(var(--shadow-blur, 0) * .53) var(--shadow-color, lime),
                   0 0 calc(var(--shadow-blur, 0) * .73) var(--shadow-color, lime),
                   0 0 var(--shadow-blur, 0) var(--shadow-color, lime);
    --shadow-offset: calc(var(--shadow-x, 0) / 2) calc(var(--shadow-y, 0) / 2) 0 var(--background-color, #ffffff),
                     var(--shadow-x, 0) var(--shadow-y, 0) var(--shadow-blur, 0) var(--shadow-color, currentColor);

    --has-shadow: var(--OFF);
    --shadow: var(--shadow-regular);

    --has-stroke: var(--OFF);
    --stroke: var(--stroke-width, .01em) var(--stroke-color, #000000);
    position: relative;

    background: var(--background);

    color: var(--foreground-color, black);

    font-family: var(--font-family, sans-serif);
    font-weight: var(--font-weight, normal);
    font-style: var(--font-style, normal);
    font-size: max(var(--font-size, 100vh), 1vh);

    text-align: var(--text-align, center);
    text-shadow: var(--has-shadow, var(--shadow));

    -webkit-text-stroke: var(--has-stroke, var(--stroke));
    
}

.big-text .countdown-wrapper .countdown,
.big-text .text-wrapper .text {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;

    padding: var(--padding, var(--padding-regular));
}

.big-text .countdown-wrapper .countdown p,
.big-text .text-wrapper .text p {
    width: 100%;
}

.big-text .countdown {
    font-variant-numeric: tabular-nums;
    order: var(--countdown-placement, var(--placement-start));
}

.big-text .is-resizing {
    visibility: hidden;
}

.big-text .is-resizing .countdown,
.big-text .is-resizing .text {
    display: block;
    bottom:  auto;
    /*right:  auto;*/
}

/* Add an extra character to coundown when resizing, to compensate for narrow numbers */
.big-text .is-resizing .countdown-wrapper .countdown > ::after,
.big-text .is-resizing.countdown-wrapper .countdown > ::after {
    display: inline;
    content: '.';
    visibility: hidden;
}


/*******************************************************************************
 * Grid
 ******************************************************************************/

/* Setup  */
.countdown-wrapper {
    grid-area: cnt;
}

.image-wrapper {
    grid-area: img;
}

.text-wrapper {
    grid-area: txt;
}

.big-text.has-countdown:not(.has-image) .countdown-wrapper,
.big-text.has-image:not(.has-countdown) .image-wrapper {
    grid-area: aside;
}

.big-text .layout {
    display: grid;
    grid-template-columns: auto;
    grid-template-rows: auto;
    grid-template-areas: "txt";
    height: 100%;
    width: 100%;
}

/* Layouts: 2 areas  */
.big-text:is(.has-image, .has-countdown) .layout {
    grid-template-columns: auto;
    grid-template-rows: var(--grid-size-1, auto) auto;
}

.big-text:is(.has-image, .has-countdown) .layout {
    grid-template-areas: "txt" "aside";
}

.big-text:is(.has-image, .has-countdown):is(.l01, .l03) .layout {
    grid-template-areas: "aside" "txt";
}

.big-text:is(.has-image, .has-countdown):is([class^="l1"], [class*="l1"]) .layout {
    grid-template-columns: var(--grid-size-1, auto) auto;
    grid-template-rows: auto;
}

.big-text:is(.has-image, .has-countdown):is(.l10, .l12) .layout {
    grid-template-areas: "txt aside";
}

.big-text:is(.has-image, .has-countdown):is(.l11, .l13) .layout {
    grid-template-areas: "aside txt";
}

/* Layouts: 3 areas (simple, column) */
.big-text.has-image.has-countdown .layout {
    --_grid-size-1: clamp(20%, calc(0.666 * var(--grid-size-1)), 60%);
    --_grid-size-2: clamp(20%, calc(0.666 * var(--grid-size-2)), calc(80% - var(--_grid-size-1)));
    grid-template-columns: auto;
    grid-template-rows: var(--_grid-size-1) var(--_grid-size-2) auto;
}

.big-text.has-image.has-countdown .layout,
.big-text.has-image.has-countdown.l20 .layout { grid-template-areas: "txt" "cnt" "img"; }
.big-text.has-image.has-countdown.l21 .layout { grid-template-areas: "img" "txt" "cnt"; }
.big-text.has-image.has-countdown.l22 .layout { grid-template-areas: "cnt" "txt" "img"; }
.big-text.has-image.has-countdown.l23 .layout { grid-template-areas: "img" "cnt" "txt"; }
.big-text.has-image.has-countdown.l24 .layout { grid-template-areas: "txt" "img" "cnt"; }
.big-text.has-image.has-countdown.l25 .layout { grid-template-areas: "cnt" "img" "txt"; }

/* Layouts: 3 areas (simple, row) */
.big-text.has-image.has-countdown:is([class^="l3"], [class*="l3"]) .layout {
    grid-template-columns: var(--_grid-size-1) var(--_grid-size-2) auto;
    grid-template-rows: auto;
}

.big-text.has-image.has-countdown .layout,
.big-text.has-image.has-countdown.l30 .layout { grid-template-areas: "txt cnt img"; }
.big-text.has-image.has-countdown.l31 .layout { grid-template-areas: "img txt cnt"; }
.big-text.has-image.has-countdown.l32 .layout { grid-template-areas: "cnt txt img"; }
.big-text.has-image.has-countdown.l33 .layout { grid-template-areas: "img cnt txt"; }
.big-text.has-image.has-countdown.l34 .layout { grid-template-areas: "txt img cnt"; }
.big-text.has-image.has-countdown.l35 .layout { grid-template-areas: "cnt img txt"; }


/* Layouts: 3 areas (complex) */
.big-text.has-image.has-countdown:is([class^="l4"], [class*="l4"], [class^="l5"], [class*="l5"], [class^="l6"], [class*="l6"], [class^="l7"], [class*="l7"]) .layout {
    grid-template-columns: var(--grid-size-1) auto;
    grid-template-rows: var(--grid-size-2) auto;
}

.big-text.has-image.has-countdown.l40 .layout { grid-template-areas: "txt txt" "cnt img"; }
.big-text.has-image.has-countdown.l41 .layout { grid-template-areas: "img img" "txt cnt"; }
.big-text.has-image.has-countdown.l42 .layout { grid-template-areas: "cnt cnt" "txt img"; }
.big-text.has-image.has-countdown.l43 .layout { grid-template-areas: "img img" "cnt txt"; }
.big-text.has-image.has-countdown.l44 .layout { grid-template-areas: "txt txt" "img cnt"; }
.big-text.has-image.has-countdown.l45 .layout { grid-template-areas: "cnt cnt" "img txt"; }

.big-text.has-image.has-countdown.l50 .layout { grid-template-areas: "txt cnt" "txt img"; }
.big-text.has-image.has-countdown.l51 .layout { grid-template-areas: "img txt" "img cnt"; }
.big-text.has-image.has-countdown.l52 .layout { grid-template-areas: "cnt txt" "cnt img"; }
.big-text.has-image.has-countdown.l53 .layout { grid-template-areas: "img cnt" "img txt"; }
.big-text.has-image.has-countdown.l54 .layout { grid-template-areas: "txt img" "txt cnt"; }
.big-text.has-image.has-countdown.l55 .layout { grid-template-areas: "cnt img" "cnt txt"; }

.big-text.has-image.has-countdown.l60 .layout { grid-template-areas: "txt cnt" "img img"; }
.big-text.has-image.has-countdown.l61 .layout { grid-template-areas: "img txt" "cnt cnt"; }
.big-text.has-image.has-countdown.l62 .layout { grid-template-areas: "cnt txt" "img img"; }
.big-text.has-image.has-countdown.l63 .layout { grid-template-areas: "img cnt" "txt txt"; }
.big-text.has-image.has-countdown.l64 .layout { grid-template-areas: "txt img" "cnt cnt"; }
.big-text.has-image.has-countdown.l65 .layout { grid-template-areas: "cnt img" "txt txt"; }

.big-text.has-image.has-countdown.l70 .layout { grid-template-areas: "txt img" "cnt img"; }
.big-text.has-image.has-countdown.l71 .layout { grid-template-areas: "img cnt" "txt cnt"; }
.big-text.has-image.has-countdown.l72 .layout { grid-template-areas: "cnt img" "txt img"; }
.big-text.has-image.has-countdown.l73 .layout { grid-template-areas: "img txt" "cnt txt"; }
.big-text.has-image.has-countdown.l74 .layout { grid-template-areas: "txt cnt" "img cnt"; }
.big-text.has-image.has-countdown.l75 .layout { grid-template-areas: "cnt txt" "img txt"; }


/* Background image */
.big-text.has-background-image {
    display: flex;
    justify-content: var(--content-h-placement, center);
    align-items: var(--content-v-placement, center);
}

.big-text.has-background-image .layout {
    max-height: var(--content-height, 100%);
    max-width: var(--content-width, 100%);
}

.big-text.has-background-image .image-wrapper {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: -1;
}

.big-text.has-background-image .image-wrapper figure {
    height: 100%;
    width: 100%;
}
